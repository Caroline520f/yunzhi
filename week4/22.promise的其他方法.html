<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // promise.all
      let num = 1;

      //  第一个promise
       const p1 = new Promise(function (resolve, reject) {
        if (num <= 1) {
          resolve("1111");
        }
        reject("11");
      });

      //   第二个promise
      const p2 = new Promise(function (resolve, reject) {
        if (num >= 1) {
          resolve("222aa");
        }
        reject("22bb");
      });

      //   第三个promise
      const p3 = new Promise(function (resolve, reject) {
        if (num == 1) {
          resolve("333aaa");
        }
        reject("333bbb");
      });

    //   包装所有的promise对象
      const p = Promise.all([p1,p2,p3])
      
      p.then(
        res =>{
            // 如果所有promise对象都成功，就传入所有promise对象的成功的数据
            console.log("p成功状态下的参数res：",res)
        },
        err =>{
            // 如果有一个promise对象失败，就传入该promise对象的失败的数据
            // 如果有两个以上promise对象失败，就优先传入最早失败的promise对象的数据
            console.log("p成功状态下的参数err：",err)
        }
      ) 

      // promise.race
      // 第一个promise
      // const p1 = new Promise(function (resolve, reject) {
      //   setTimeout(() => {
      //     if (num <= 1) {
      //       resolve("1111");
      //     }
      //     reject("11");
      //   }, 500);
      // });

      // //   第二个promise
      // const p2 = new Promise(function (resolve, reject) {
      //   setTimeout(() => {
      //     if (num >= 5) {
      //       resolve("222aa");
      //     }
      //     reject("22bb");
      //   }, 800);
      // });

      // //   第三个promise
      // const p3 = new Promise(function (resolve, reject) {
      //   setTimeout(() => {
      //     if (num == 1) {
      //       resolve("333aaa");
      //     }
      //     reject("333bbb");
      //   }, 400);
      // });

      // //   包装所有的promise对象
      // const p = Promise.race([p1, p2, p3]);

      // p.then(
      //   (res) => {
      //     // 如果所有promise对象谁先成功，就传入该promise对象的成功的数据
      //     console.log("p成功状态下的参数res：", res);
      //   },
      //   (err) => {
      //     // 如果有一个promise对象失败，就传入该promise对象的失败的数据
      //     // 如果有两个以上promise对象失败，就优先传入最早失败的promise对象的数据
      //     console.log("p成功状态下的参数err：", err);
      //   }
      // );
    </script>
  </body>
</html>
