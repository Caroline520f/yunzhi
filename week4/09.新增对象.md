# ES6 对象

## 一、ES6 对象

### 1.1 对象字面量

- 属性的简洁表示法。
- 方法名也可以简写。
- 属性名表达式。A

> 注意

属性的简洁表示法和属性名表达式不能同时使用，否则会报错。

### 1.2 对象的新方法

> 语法

    Object.assign(target, source_1, ···)

> 功能

- 用于将源对象的所有可枚举属性复制到目标对象中。

> 参数

- 如果目标对象和源对象有同名属性，或者多个源对象有同名属性，则后面的属性会覆盖前面的属性。
- 如果该函数只有一个参数，当参数为对象时，直接返回该对象；当参数不是对象时，会先将参数转为对象然后返回。

---

> 语法

    Object.is(value1, value2)

> 功能

- 用来比较两个值是否严格相等，与（===）基本类似。

> 参数说明

- 与（===）的区别：
  - +0 不等于 -0。
  - NaN 等于本身。

## 二、对象深拷贝和浅拷贝

### 2.1 基本类型的值和引用类型的值

> 基本类型值

基本类型值指的是存储在**栈**中的一些简单的数据段。  
在 JavaScript 中基本数据类型有：String、Number、Undefined、Null、Boolean，在 ES6 中，定义了一种新的基本数据类型：Symbol。

> 引用类型值

引用类型值是引用类型的实例，它是保存在**堆内存**中的一个对象，引用类型是一种数据结构，最常用的是：Object、Array、Function 类型，另外还有：Date、RegExp、Error 等，ES6 同样也提供了：Set、Map 两种新的数据结构。

### 2.2 JavaScript 如何复制引用类型的值

当变量复制引用类型值的时候，会将变量的值复制到新变量上，但变量的值是一个指针，指向存储在堆内存中的对象（JS 规定放在堆内存中的对象无法直接访问，必须要访问这个对象在栈内存中的地址，然后再按照这个地址去获得这个对象中的值，所以引用类型的值是按引用访问）。

变量的值也就是这个指针是存储在栈上的。

![引用类型值的存储](img/引用类型值的存储.jpg)

### 2.3 浅拷贝

创建一个新对象，这个对象有着原始对象属性值的一份精确拷贝。如果属性是基本类型，拷贝的就是基本类型的值，如果属性是引用类型，拷贝的就是内存地址，所以如果其中一个对象改变了这个地址，就会影响到另一个对象。

> 浅拷贝方法

1. Object.assign 中的目标对象和新生成的对象

   Object.assign 只是在根属性(对象的第一层级)创建了一个新的对象，但是对于属性的值是对象，只会拷贝一份相同的内存地址。

2. 直接赋值

### 2.4 深拷贝

将一个对象从内存中完整的拷贝一份出来，从堆内存中开辟一个新的区域存放新对象，且修改新对象不会影响原对象。

1. Object.assign 中的目标对象和源对象以及新生成的对象和源对象

2. 扩展运算符和 Object.assign() 有同样的缺陷，对于值是对象的属性无法完全拷贝成两个不同对象，但是如果属性都是基本类型的值的话，使用扩展运算符更加方便。

3. JSON.stringify。

> 通过 JSON.stringify 实现深拷贝有几点要注意

    * 拷贝的对象的值中如果有函数、undefined、symbol 则经过 JSON.stringify() 序列化后的 JSON 字符串中这个键值对会消失。
